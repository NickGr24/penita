# Инструкция по тестированию чтения PDF на мобильных устройствах

## Настройка для тестирования

### Способ 1: Локальная сеть (рекомендуется)
1. Узнайте IP-адрес вашего компьютера:
   ```bash
   hostname -I  # Linux
   ipconfig     # Windows
   ```

2. Запустите сервер на всех интерфейсах:
   ```bash
   ./venv_new/bin/python manage.py runserver 0.0.0.0:8000
   ```

3. На мобильном устройстве откройте браузер и перейдите по адресу:
   ```
   http://ВАШ_IP:8000
   ```

### Способ 2: Использование ngrok
1. Установите ngrok: https://ngrok.com/download
2. Запустите туннель:
   ```bash
   ngrok http 8000
   ```
3. Используйте предоставленный URL на мобильном устройстве

## Функции для тестирования

### Статьи (`/articles/`)
- ✅ **Навигация по страницам** - кнопки Anterior/Următor
- ✅ **Swipe жесты** - свайп влево/вправо для перелистывания
- ✅ **Zoom** - кнопки +/- и выпадающий список
- ✅ **Pinch-to-zoom** - жест щипка для масштабирования
- ✅ **Автоматическая адаптация** - режим "Lățime pagină"
- ✅ **Скачивание** - кнопка Descarcă

### Книги (`/books/`)
- ✅ **Прогресс-бар** - показывает процент прочтения
- ✅ **Полноэкранный режим** - кнопка в правом нижнем углу (только мобильные)
- ✅ **Навигация клавиатурой** - стрелки, Home, End, пробел
- ✅ **Touch gestures** - свайп и pinch
- ✅ **Адаптивный дизайн** - автоматическая перестройка интерфейса

## Что проверить

### На Android:
1. Chrome - основной браузер
2. Firefox - альтернативный рендеринг
3. Samsung Internet - если есть Samsung

### На iOS:
1. Safari - основной браузер
2. Chrome iOS - WebKit engine
3. Firefox iOS - WebKit engine

## Особенности реализации

### PDF.js
- Использует Canvas API для рендеринга PDF
- Работает на всех современных браузерах
- Поддерживает High DPI дисплеи
- Оптимизирован для мобильных устройств

### Мобильные оптимизации:
1. **Автоматическое масштабирование** - по умолчанию "по ширине страницы"
2. **Touch события** - с passive listeners для плавности
3. **Адаптивный UI** - кнопки и контролы подстраиваются под размер экрана
4. **Быстрый рендеринг** - страница за страницей, без загрузки всего документа

## Известные ограничения

1. **iOS Safari** - может ограничивать память для больших PDF
2. **Старые Android** - на Android < 7 могут быть проблемы с производительностью
3. **PDF с формами** - интерактивные формы не поддерживаются

## Альтернативные решения (если PDF.js не работает)

В коде уже предусмотрены fallback опции:
1. Прямая загрузка файла
2. Открытие в новой вкладке (использует встроенный PDF viewer браузера)
3. Google Docs Viewer (закомментирован, но может быть активирован)

## Команды для разработки

```bash
# Запуск сервера для локального тестирования
./venv_new/bin/python manage.py runserver 0.0.0.0:8000

# Проверка логов
tail -f logs/django.log  # если настроено логирование

# Сброс кеша браузера (на мобильном)
# Android Chrome: Settings → Privacy → Clear browsing data
# iOS Safari: Settings → Safari → Clear History and Website Data
```

## Контрольный чек-лист

- [ ] Загружается ли PDF?
- [ ] Работает ли навигация по страницам?
- [ ] Работают ли жесты свайпа?
- [ ] Работает ли масштабирование?
- [ ] Адаптируется ли интерфейс под размер экрана?
- [ ] Работает ли кнопка скачивания?
- [ ] Отображается ли прогресс чтения (для книг)?
- [ ] Работает ли полноэкранный режим (для книг)?

---

**Примечание**: Если возникают проблемы с CORS при загрузке PDF, убедитесь, что в `settings.py` правильно настроены `ALLOWED_HOSTS` и `CORS` заголовки.